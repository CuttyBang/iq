jQuery(document).ready(function(e){function t(e,t){C.clearRect(0,0,q,x);var n=u.width/d;for(C.strokeStyle="white",C.beginPath(),c=0;c<d;c++)C.lineTo(c*n,u.height-90*e[c]);for(C.stroke(),C.strokeStyle="red",C.beginPath(),c=0;c<d;++c)C.lineTo(c*n,u.height-(90*t[c]+400)/Math.PI);C.stroke()}function n(){r.getFrequencyResponse(h,g,l),t(g,l)}var i,a,o,r,s,u,d,g,l,h,c,w,v,f,p=window.AudioContext||window.webkitAudioContext;i=new p,a=i.destination,d=2e4,h=new Float32Array(d),g=new Float32Array(d),l=new Float32Array(d);for(var y=0;y<d;++y)h[y]=2e3/d*(y+1);w=e("#freq-slider"),v=e("#q-dial"),f=e("#gain-dial"),o={lowpass:{q:!0,gain:!1},bandpass:{q:!0,gain:!0},highpass:{q:!0,gain:!1}},u=document.getElementById("canvas");var C=u.getContext("2d");C.translate(.5,.5);var q=u.width,x=u.height;window.addEventListener("load",function(){s=e("#track"),r=i.createBiquadFilter(),r.type="lowpass",r.frequency.value=50,r.Q.value=0,r.gain.value=3,r.connect(a),n()},!1),e("#q-dial").knob({min:-50,max:50,cursor:!0,angleOffset:-135,stopper:!0,displayInput:!1,displayPrevious:!0,angleArc:270,width:100,height:100,lineCap:"round",fgColor:"#c8bc4a",bgColor:"#666666",release:function(e){this.value=e/100,r.Q.value=e/100,n()}}),e("#gain-dial").knob({min:-50,max:50,cursor:!0,angleOffset:-135,stopper:!0,displayInput:!1,displayPrevious:!0,angleArc:270,width:100,height:100,lineCap:"round",fgColor:"#c8bc4a",bgColor:"#666666",release:function(e){r.gain.value=e/100,n()}}),e("#freq-slider").on("input",function(){r.frequency.value=this.value}),e("#freq-slider").on("input",function(){r.frequency.value=this.value,n()}),function(){getPercentageOfWindow=function(){var e=getViewportSize(),t=getCanvastSize();return{x:t.width/(e.width-10),y:t.height/(e.height-10)}},getCanvasContext=function(){return e("#canvas")[0].getContext("2d")},getViewportSize=function(){return{height:window.innerHeight,width:window.innerWidth}},getCanvastSize=function(){var e=getCanvasContext();return{height:e.canvas.height,width:e.canvas.width}},updateSizes=function(){var e=getViewportSize(),n=getCanvasContext();n.canvas.height=e.height*t.y,n.canvas.width=e.width*t.x};var t=getPercentageOfWindow();e(window).on("resize",function(){updateSizes()})}()});